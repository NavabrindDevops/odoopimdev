<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--    Inherit Attribute Form-->

    <record id="pim_product_attribute_search" model="ir.ui.view">
		<field name="name">pim.product.attribute.search</field>
		<field name="model">product.attribute</field>
        <field name="mode">primary</field>
		<field name="arch" type="xml">
			<search>
                <field name="name"/>
                <field name="display_type"/>
                <field name="attribute_group"/>
                <filter string="Mandatory" name="filter_mandatory" domain="[('is_mandatory', '=', True)]"/>
                <filter string="Required in clone" name="filter_required_in_clone" domain="[('is_required_in_clone', '=', True)]"/>
<!--                <filter string="Cloning" name="filter_cloning" domain="[('is_cloning', '=', True)]"/>-->
                <filter string="Completeness" name="filter_completeness" domain="[('is_completeness', '=', True)]"/>
                <group expand="0" string="Group By">
                    <filter name="group_name" string="Name" domain="[]" context="{'group_by': 'name'}"/>
                    <filter name="group_attribute_rec" string="Attribute Group" domain="[]" context="{'group_by': 'attribute_group'}"/>
                    <filter name="group_attribute_type" string="Type" domain="[]" context="{'group_by': 'display_type'}"/>
                    <filter name="group_mandatory" string="Mandatory" domain="[]" context="{'group_by': 'is_mandatory'}"/>
                    <filter name="group_required_in_clone" string="Required in clone" domain="[]" context="{'group_by': 'is_required_in_clone'}"/>
<!--                    <filter name="group_cloning" string="Cloning" domain="[]" context="{'group_by': 'is_cloning'}"/>-->
                    <filter name="group_completeness" string="Completeness" domain="[]" context="{'group_by': 'is_completeness'}"/>
                </group>
                <separator/>
<!--                <filter name="basic_attribute_type" string="Basic Attribute Type" domain="[('attribute_types', '=', 'basic')]"/>-->
<!--                <filter name="optional_attribute_type" string="Optional Attribute Type" domain="[('attribute_types', '=', 'optional')]"/>-->
			</search>
		</field>
	</record>


    <record id="view_attribute_master_unlink_wizard_form" model="ir.ui.view">
        <field name="name">attribute.master.unlink.wizard.form</field>
        <field name="model">attribute.master.unlink.wizard</field>
        <field name="arch" type="xml">
            <form string="Confirm Deletion">
                <group>
                    <div style="justify-content: center; align-items: center; white-space: nowrap; margin: 10px 0;">
                        <p style="margin: 0; font-size: 14px;">
                            Are you sure you want to delete this attribute?
                        </p>
                    </div>
                </group>
                <footer>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                    <button string="Delete" class="btn-primary" type="object" name="confirm_unlink"/>
                </footer>
            </form>
        </field>
    </record>


    <record id="view_product_attribute_master_custom" model="ir.ui.view">
        <field name="name">product.attribute.master.custom.layout</field>
        <field name="model">product.attribute</field>
        <field name="mode">primary</field>
        <field name="arch" type="xml">
            <form string="Attribute Master" create="false" edit="true" delete="false" class="page_form">
                <div class="d-flex align-items-start">
                    <div class="left-column">
                        <field name="master_attribute_ids">
                            <list editable="bottom" create="false" edit="false" delete="false" default_order="create_date desc">
                                <field name="name"/>
                                <button name="attribute_edit_open_form_view" type="object" icon="fa-pencil-square-o"  title='view' class="btn-link"/>
                                <button name="attribute_master_unlink" type="object" icon="fa-trash" title='fa-trash' class="btn-link text-danger"/>
                            </list>
                        </field>
                    </div>

                    <div class="right-column">
                        <form create="false" edit="false" delete="false" readonly="1" class="attribute_type">
                            <header>
                                <button string="Back" type="object" icon="fa-arrow-left" name="action_back_to_attribute_menu"/>
                            </header>
                            <div class="pim_oe_title">
                                <h2 class="pim_create_attribute"><span class="attr_title">Edit Attribute</span></h2>
                            </div>
                        </form>
                        <form>
                            <div class="o_col_6 col-12 attr_form">
                                <div class="attr_properties">
                                    <sheet class="attr_sheet">
                                        <div class="oe_title">
                                            <h1 class="name"><field name="name" readonly="1" class="oe_inline"/></h1>
                                        </div>
                                        <notebook class="type_properties">
                                            <page name="type_properties" string="Properties">
                                                <div id="o_type_properties" class="d-lg-flex top_property">
                                                    <div id="o_type_properties_main" class="flex-grow-1">
                                                        <group string="General Parameters" class="general_param">
                                                            <label for="name" string="Attribute Name" style="font-weight:bold;"/>
                                                        </group>
                                                    </div>
                                                </div>
                                                <div class="attr_form_values">
                                                    <div>
                                                        <field name="name"  required="True" nolabel="1" placeholder="Enter attribute name" class="attribute_type_class"/>
                                                    </div>
                                                    <div>
                                                        <div>
                                                            <group>
                                                                <label for="display_type" string="Type" style="font-weight:bold;" required="True"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <field name="display_type" nolabel="1" readonly="1" class="attribute_type_class attr_display_type"/>
                                                    </div>
                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="code" string="Code"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <field name="code" nolabel="1"
                                                              options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"
                                                              class="attribute_type_class"/>
                                                    </div>
                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="attribute_group" string="Attribute group"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div>
                                                       <field name="attribute_group" nolabel="1" widget="many2many_tags"
                                                              options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"
                                                              class="attribute_type_class"/>
                                                    </div>
                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="max_value" string="Maximum"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div>
                                                       <field name="max_value" nolabel="1" class="attribute_type_class"/>
                                                    </div>
                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="alpha_numeric_value" string="Alpha Numeric Validation"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <field name="alpha_numeric_value" widget="radio" options="{'horizontal': true}" class="o_radio_horizontal"/>
                                                    </div><br/>

                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="unique_value" string="Unique value"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex">
                                                        <field name="unique_value" widget="radio" options="{'horizontal': true}" class="o_radio_horizontal"/>
                                                    </div><br/>

                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="value_per_channel" string="Value per channel"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex">
                                                        <field name="value_per_channel" widget="radio" options="{'horizontal': true}" class="o_radio_horizontal"/>
                                                    </div><br/>
                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="value_per_locale" string="Value per locale"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex">
                                                        <field name="value_per_locale" widget="radio" options="{'horizontal': true}" class="o_radio_horizontal"/>
                                                    </div><br/>
                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="usable_in_grid" string="Usable in grid"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex">
                                                        <field name="usable_in_grid" widget="radio" options="{'horizontal': true}" class="o_radio_horizontal"/>
                                                    </div><br/>
                                                    <div id="o_type_properties">
                                                        <div id="o_type_properties_main" class="flex-grow-1">
                                                            <group>
                                                                <label for="locale_specific" string="Locale specific"/>
                                                            </group>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex">
                                                        <field name="locale_specific" widget="radio" options="{'horizontal': true}" class="o_radio_horizontal"/>
                                                    </div><br/>
                                                    <div id="o_type_properties" class="d-lg-flex top_property" invisible="display_type not in ['simple_select','color','multi_select']">
                                                    <div id="o_type_properties_main" class="flex-grow-1">
                                                        <group string="Attribute Values" class="general_param">
                                                        </group>
                                                        <div class="d-flex">
                                                            <button name="sort_colors" string="Sort Colors"
                                                                    type="object"
                                                                    invisible="display_type != 'color'"></button>
                                                            <br/>
                                                        </div>
                                                        <div class="d-flex">

                                                            <field name="value_ids"
                                                                   invisible="display_type not in ['simple_select','color','multi_select']"
                                                                   required="display_type in ['simple_select','color','multi_select']">
                                                                <list editable="bottom">
                                                                    <field name="sequence" widget="handle"/>
                                                                    <field name="name"/>
                                                                    <field name="display_type"
                                                                           column_invisible="True"/>
                                                                    <field name="html_color"
                                                                           column_invisible="parent.display_type != 'color'"
                                                                           invisible="image" widget="color"/>
                                                                    <field name="image"
                                                                           class="oe_avatar text-start float-none"
                                                                           column_invisible="parent.display_type != 'color'"
                                                                           options="{'size': [70, 70]}"
                                                                           widget="image"/>
                                                                </list>
                                                            </field>
                                                        </div>
                                                    </div>
                                                    </div>
                                                    <div id="o_type_properties" class="d-lg-flex top_property" invisible="display_type not in ['table']">
                                                    <div id="o_type_properties_main" class="flex-grow-1">
                                                        <group string="Table Attribute Values" class="general_param">
                                                        </group>
                                                        <div class="d-flex">
                                                            <field name="sub_attribute_ids"
                                                                   invisible="display_type not in ['table']"
                                                                   required="display_type in ['table']">
                                                                <list editable="bottom">
                                                                    <field name="name"/>
                                                                    <field name="parent_attribute_id" column_invisible="1"/>
                                                                    <field name="display_type"/>
                                                                </list>
                                                            </field>
                                                        </div>
                                                    </div>
                                                    </div>

                                                </div>
                                            </page>
                                            <page name="type_label_translation" string="Label Translations" invisible="1">

                                            </page>
                                            <page name="type_general_info" string="General">
                                                <div id="o_type_properties" class="d-lg-flex top_property">
                                                    <div id="o_type_properties_main" class="flex-grow-1">
                                                        <group string="Information" class="general_param"/>
                                                    </div>
                                                </div>
                                                <div class="attr_form_values">
                                                    <div>
                                                        <div>
                                                            <label for="is_mandatory" string="Mandatory" style="font-weight:bold;"/>
                                                            <field name="is_mandatory" style="padding-left: 9%;"/>
                                                        </div>
                                                        <div style="margin-top: 15px;">
                                                            <label for="is_required_in_clone" string="Required For Clone" style="font-weight:bold;"/>
                                                            <field name="is_required_in_clone" style="padding-left: 2%;"/>
                                                        </div>
<!--                                                            <div style="margin-top: 15px;">-->
<!--                                                                <label for="is_cloning" string="Cloning" style="font-weight:bold;"/>-->
<!--                                                                <field name="is_cloning" style="padding-left: 2%;"/>-->
<!--                                                            </div>-->
                                                        <div style="margin-top: 15px;">
                                                            <label for="is_completeness" string="Completeness" style="font-weight:bold;"/>
                                                            <field name="is_completeness" style="padding-left: 6.5%;"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </page>
                                            <page name="type_label_translation" string="Label Translations" invisible="1">

                                            </page>
                                            <page name="History">
                                                <group>
                                                    <field name="history_log" nolabel="1" readonly="1"/>
                                                </group>
                                            </page>
                                        </notebook>
                                    </sheet>
                                </div>
                            </div>
                        </form>
                        <div class="attr_creation" style="margin-top: 16px;">
                                                        <button type="object" string="Save"
                                                           name="create_attributes" class="oe_highlight"/>
                                                    </div>
                    </div>
                </div>
            </form>
        </field>
    </record>

    <record id="product_attribute_pim_tree_view" model="ir.ui.view">
        <field name="name">product.attribute.tree.view</field>
        <field name="model">product.attribute</field>
        <field name="mode">primary</field>
        <field name="arch" type="xml">
            <list create="false" edit="true" default_order="create_date desc">
                <header>
                    <button name="create_pim_attribute_type" type="object" class="btn-primary"
                        string="Create Attribute" display="always"
                        invisible="context.get('active_model', 'product.attribute') != 'product.attribute'"/>
                </header>
                <field name="name"/>
                <field name="display_type" string="Type"/>
                <field name="company_id"/>
                <field name="attribute_group" widget="many2many_tags"/>
                <field name="is_mandatory" widget="boolean_toggle"/>
                <field name="is_required_in_clone" widget="boolean_toggle"/>
                <field name="is_cloning" widget="boolean_toggle" column_invisible="True"/>
                <field name="is_completeness" widget="boolean_toggle"/>
                <button name="attribute_edit_open_form_view" type="object" icon="fa-pencil-square-o" class="btn-link"/>
                <button name="attribute_master_unlink" type="object" icon="fa-trash" class="btn-link text-danger"/>
            </list>
        </field>
    </record>

        <!-- Action to open the custom view -->
    <record id="action_product_attributes_custom" model="ir.actions.act_window">
        <field name="name">Attributes</field>
        <field name="res_model">product.attribute</field>
        <field name="domain">[('company_id', 'in', allowed_company_ids)]</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="product_attribute_pim_tree_view"/>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'list', 'view_id': ref('product_attribute_pim_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_product_attribute_master_custom')}),
                ]"/>
    </record>
</odoo>
